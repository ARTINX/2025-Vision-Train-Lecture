相机模型可以用以下矩阵表示：
$$
\mathbf{x} = A [R | t] \mathbf{X}
$$
其中，$ A $ 是相机的内参矩阵，$ [R | t] $ 是外参（旋转矩阵 $ R $ 和平移向量 $ t $），$ \mathbf{X} $ 是世界坐标系中的3D点，而 $ \mathbf{x} $ 是投影到图像平面的2D点。

在标定中，使用的3D点位于已知的平面上（通常 $ Z = 0 $），所以可以通过单应矩阵 $ H $ 来表示世界坐标系中的2D点和图像中的2D点之间的变换关系：
$$
\mathbf{x} \sim H \mathbf{X}
$$
这里 $ H $ 是3x3的单应矩阵。为了推导内参矩阵 $ A $，我们需要利用 $ H $ 和内参之间的关系。

### 内参矩阵的约束推导：

单应矩阵 $ H $ 可以表示为：
$$
H = A \begin{bmatrix} r_1 & r_2 & t \end{bmatrix}
$$
其中 $ r_1 $ 和 $ r_2 $ 是旋转矩阵 $ R $ 的前两列，$ t $ 是平移向量，$ A $ 是内参矩阵。

定义单应矩阵 $ H = [h_1, h_2, h_3] $，其中 $ h_1, h_2, h_3 $ 分别是单应矩阵 $ H $ 的三列。

根据旋转矩阵的正交性条件 $ r_1 \cdot r_2 = 0 $ 以及 $ r_1 $ 和 $ r_2 $ 的模长相等，即：
$$
r_1^T r_2 = 0 \quad \text{(正交性条件)}
$$
$$
r_1^T r_1 = r_2^T r_2 \quad \text{(模长相等)}
$$
这些条件在内参矩阵 $ A $ 上施加了约束。

通过上述等式推导出对单应矩阵的约束关系：
$$
h_1^T A^{-T} A^{-1} h_2 = 0
$$
$$
h_1^T A^{-T} A^{-1} h_1 = h_2^T A^{-T} A^{-1} h_2
$$
这两个方程式分别是基于旋转矩阵的正交性和等模长特性推导出来的，它们为我们提供了对内参矩阵 $ A $ 的线性约束。